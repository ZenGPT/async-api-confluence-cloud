(()=>{"use strict";var A={77:(n,i,e)=>{var u=e(144),s=function(){var t=this,o=t._self._c;return o("div",{staticClass:"save-and-exit inline-block"},[o("button",{staticClass:"flex items-center bg-blue-700 px-2 py-1 text-white text-sm font-semibold rounded",on:{click:t.saveAndExit}},[o("span",[o("svg",{staticClass:"h-4 w-4",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"}})])]),o("span",[t._v("Save and Go back to Confluence")])])])},r=[],p={name:"SaveAndGoBackButton",props:["saveAndExit"]},w=p,d=e(1),v=(0,d.Z)(w,s,r,!1,null,null,null),y=v.exports,x=e(479),b=e(61),E=e(392),P=e(959),j=e(485),S=e(383),Z=e(828),D=e(13),M=(l,t,o)=>new Promise((f,h)=>{var C=c=>{try{m(o.next(c))}catch(g){h(g)}},k=c=>{try{m(o.throw(c))}catch(g){h(g)}},m=c=>c.done?f(c.value):Promise.resolve(c.value).then(C,k);m((o=o.apply(l,t)).next())});function G(l){return M(this,null,function*(){const t=new Z.Z(b.Z),f=yield new j._(t).save(l);if((0,S.L)(l.diagramType,"save_macro","custom_content"),yield t.isInContentEdit()){const h=yield t.getMacroData(),C=h?.uuid||(0,D.Z)(),k=l.getCoreData?l.getCoreData():"",m={uuid:C,customContentId:f,updatedAt:new Date};t.saveMacro(m,k),(0,S.L)(l.diagramType,"save_macro","macro_body")}else console.log("not content edit, skip save macro.");return f})}var z=e(72),I=e(272),B=(l,t,o)=>new Promise((f,h)=>{var C=c=>{try{m(o.next(c))}catch(g){h(g)}},k=c=>{try{m(o.throw(c))}catch(g){h(g)}},m=c=>c.done?f(c.value):Promise.resolve(c.value).then(C,k);m((o=o.apply(l,t)).next())});const T=(0,E.Z)(new Z.Z(b.Z));new u.ZP({render:l=>l(y,{props:{saveAndExit:()=>B(void 0,null,function*(){var t;const o=localStorage.document,f=I.ZP.load(o);window.diagram=Object.assign(window.diagram||{},{diagramType:P.V1.AsyncApi,code:o}),window.diagram.title=(t=f?.info)==null?void 0:t.title,yield G(window.diagram),b.Z.dialog.close()})}})}).$mount("#save-and-go-back");function W(l){const t=document.getElementById("mainFrame");t&&(localStorage.document=l,t.src="/asyncapi-studio/index.html")}function F(){return B(this,null,function*(){yield x.Z.apWrapper.initializeContext();const{doc:t}=yield T.load();window.diagram=t,W(t.code)})}F()},72:()=>{document.addEventListener("keydown",function(n){if(n.code==="Escape")return console.log("Escape key is ignored."),n.stopPropagation(),n.preventDefault(),!1})}},O={};function a(n){var i=O[n];if(i!==void 0)return i.exports;var e=O[n]={exports:{}};return A[n](e,e.exports,a),e.exports}a.m=A,(()=>{var n=[];a.O=(i,e,u,s)=>{if(e){s=s||0;for(var r=n.length;r>0&&n[r-1][2]>s;r--)n[r]=n[r-1];n[r]=[e,u,s];return}for(var p=1/0,r=0;r<n.length;r++){for(var e=n[r][0],u=n[r][1],s=n[r][2],w=!0,d=0;d<e.length;d++)(s&!1||p>=s)&&Object.keys(a.O).every(P=>a.O[P](e[d]))?e.splice(d--,1):(w=!1,s<p&&(p=s));if(w){n.splice(r--,1);var v=u();v!==void 0&&(i=v)}}return i}})(),a.d=(n,i)=>{for(var e in i)a.o(i,e)&&!a.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),(()=>{var n={917:0};a.O.j=u=>n[u]===0;var i=(u,s)=>{var r=s[0],p=s[1],w=s[2],d,v,y=0;if(r.some(b=>n[b]!==0)){for(d in p)a.o(p,d)&&(a.m[d]=p[d]);if(w)var x=w(a)}for(u&&u(s);y<r.length;y++)v=r[y],a.o(n,v)&&n[v]&&n[v][0](),n[v]=0;return a.O(x)},e=self.webpackChunkconfluence_plugin=self.webpackChunkconfluence_plugin||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var _=a.O(void 0,[887,64],()=>a(77));_=a.O(_)})();
